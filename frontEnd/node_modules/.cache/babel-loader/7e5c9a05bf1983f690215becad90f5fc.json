{"ast":null,"code":"import _toConsumableArray from \"/media/tonecas/7F2FE72F0F1DBFAC1/Develop/whiteboard/Novo/mern-sockeio-realtime-board-sharing-app-main (1)/mern-sockeio-realtime-board-sharing-app-main/frontEnd/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/media/tonecas/7F2FE72F0F1DBFAC1/Develop/whiteboard/Novo/mern-sockeio-realtime-board-sharing-app-main (1)/mern-sockeio-realtime-board-sharing-app-main/frontEnd/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/media/tonecas/7F2FE72F0F1DBFAC1/Develop/whiteboard/Novo/mern-sockeio-realtime-board-sharing-app-main (1)/mern-sockeio-realtime-board-sharing-app-main/frontEnd/src/Canvas.js\";\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport rough from \"roughjs/bundled/rough.esm\";\nvar generator = rough.generator();\nvar Canvas = function Canvas(_ref) {\n  var canvasRef = _ref.canvasRef,\n    ctx = _ref.ctx,\n    color = _ref.color,\n    setElements = _ref.setElements,\n    elements = _ref.elements,\n    tool = _ref.tool,\n    socket = _ref.socket;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isDrawing = _useState2[0],\n    setIsDrawing = _useState2[1];\n  useEffect(function () {\n    var canvas = canvasRef.current;\n    canvas.height = window.innerHeight * 2;\n    canvas.width = window.innerWidth * 2;\n    canvas.style.width = \"\".concat(window.innerWidth, \"px\");\n    canvas.style.height = \"\".concat(window.innerHeight, \"px\");\n    var context = canvas.getContext(\"2d\");\n    context.strokeWidth = 5;\n    context.scale(2, 2);\n    context.lineCap = \"round\";\n    context.strokeStyle = color;\n    context.lineWidth = 5;\n    ctx.current = context;\n  }, []);\n  useEffect(function () {\n    ctx.current.strokeStyle = color;\n  }, [color]);\n  var handleMouseDown = function handleMouseDown(e) {\n    var _e$nativeEvent = e.nativeEvent,\n      offsetX = _e$nativeEvent.offsetX,\n      offsetY = _e$nativeEvent.offsetY;\n    if (tool === \"pencil\") {\n      setElements(function (prevElements) {\n        return [].concat(_toConsumableArray(prevElements), [{\n          offsetX: offsetX,\n          offsetY: offsetY,\n          path: [[offsetX, offsetY]],\n          stroke: color,\n          element: tool\n        }]);\n      });\n    } else {\n      setElements(function (prevElements) {\n        return [].concat(_toConsumableArray(prevElements), [{\n          offsetX: offsetX,\n          offsetY: offsetY,\n          stroke: color,\n          element: tool\n        }]);\n      });\n    }\n    setIsDrawing(true);\n  };\n  useLayoutEffect(function () {\n    var roughCanvas = rough.canvas(canvasRef.current);\n    if (elements.length > 0) {\n      ctx.current.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n    }\n    elements.forEach(function (ele, i) {\n      if (ele.element === \"rect\") {\n        roughCanvas.draw(generator.rectangle(ele.offsetX, ele.offsetY, ele.width, ele.height, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: 5\n        }));\n      } else if (ele.element === \"line\") {\n        roughCanvas.draw(generator.line(ele.offsetX, ele.offsetY, ele.width, ele.height, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: 5\n        }));\n      } else if (ele.element === \"pencil\") {\n        roughCanvas.linearPath(ele.path, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: 5\n        });\n      }\n    });\n    var canvasImage = canvasRef.current.toDataURL();\n    socket.emit(\"drawing\", canvasImage);\n  }, [elements]);\n  var handleMouseMove = function handleMouseMove(e) {\n    if (!isDrawing) {\n      return;\n    }\n    var _e$nativeEvent2 = e.nativeEvent,\n      offsetX = _e$nativeEvent2.offsetX,\n      offsetY = _e$nativeEvent2.offsetY;\n    if (tool === \"rect\") {\n      setElements(function (prevElements) {\n        return prevElements.map(function (ele, index) {\n          return index === elements.length - 1 ? {\n            offsetX: ele.offsetX,\n            offsetY: ele.offsetY,\n            width: offsetX - ele.offsetX,\n            height: offsetY - ele.offsetY,\n            stroke: ele.stroke,\n            element: ele.element\n          } : ele;\n        });\n      });\n    } else if (tool === \"line\") {\n      setElements(function (prevElements) {\n        return prevElements.map(function (ele, index) {\n          return index === elements.length - 1 ? {\n            offsetX: ele.offsetX,\n            offsetY: ele.offsetY,\n            width: offsetX,\n            height: offsetY,\n            stroke: ele.stroke,\n            element: ele.element\n          } : ele;\n        });\n      });\n    } else if (tool === \"pencil\") {\n      setElements(function (prevElements) {\n        return prevElements.map(function (ele, index) {\n          return index === elements.length - 1 ? {\n            offsetX: ele.offsetX,\n            offsetY: ele.offsetY,\n            path: [].concat(_toConsumableArray(ele.path), [[offsetX, offsetY]]),\n            stroke: ele.stroke,\n            element: ele.element\n          } : ele;\n        });\n      });\n    }\n  };\n  var handleMouseUp = function handleMouseUp() {\n    setIsDrawing(false);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 overflow-hidden border border-dark px-0 mx-auto mt-3\",\n    style: {\n      height: \"500px\"\n    },\n    onMouseDown: handleMouseDown,\n    onMouseMove: handleMouseMove,\n    onMouseUp: handleMouseUp,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }));\n};\nexport default Canvas;","map":{"version":3,"names":["React","useEffect","useLayoutEffect","useState","rough","generator","Canvas","canvasRef","ctx","color","setElements","elements","tool","socket","isDrawing","setIsDrawing","canvas","current","height","window","innerHeight","width","innerWidth","style","context","getContext","strokeWidth","scale","lineCap","strokeStyle","lineWidth","handleMouseDown","e","nativeEvent","offsetX","offsetY","prevElements","path","stroke","element","roughCanvas","length","clearRect","forEach","ele","i","draw","rectangle","roughness","line","linearPath","canvasImage","toDataURL","emit","handleMouseMove","map","index","handleMouseUp"],"sources":["/media/tonecas/7F2FE72F0F1DBFAC1/Develop/whiteboard/Novo/mern-sockeio-realtime-board-sharing-app-main (1)/mern-sockeio-realtime-board-sharing-app-main/frontEnd/src/Canvas.js"],"sourcesContent":["import React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport rough from \"roughjs/bundled/rough.esm\";\n\nconst generator = rough.generator();\nconst Canvas = ({\n  canvasRef,\n  ctx,\n  color,\n  setElements,\n  elements,\n  tool,\n  socket,\n}) => {\n  const [isDrawing, setIsDrawing] = useState(false);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    canvas.height = window.innerHeight * 2;\n    canvas.width = window.innerWidth * 2;\n    canvas.style.width = `${window.innerWidth}px`;\n    canvas.style.height = `${window.innerHeight}px`;\n    const context = canvas.getContext(\"2d\");\n\n    context.strokeWidth = 5;\n    context.scale(2, 2);\n    context.lineCap = \"round\";\n    context.strokeStyle = color;\n    context.lineWidth = 5;\n    ctx.current = context;\n  }, []);\n\n  useEffect(() => {\n    ctx.current.strokeStyle = color;\n  }, [color]);\n\n  const handleMouseDown = (e) => {\n    const { offsetX, offsetY } = e.nativeEvent;\n\n    if (tool === \"pencil\") {\n      setElements((prevElements) => [\n        ...prevElements,\n        {\n          offsetX,\n          offsetY,\n          path: [[offsetX, offsetY]],\n          stroke: color,\n          element: tool,\n        },\n      ]);\n    } else {\n      setElements((prevElements) => [\n        ...prevElements,\n        { offsetX, offsetY, stroke: color, element: tool },\n      ]);\n    }\n\n    setIsDrawing(true);\n  };\n\n  useLayoutEffect(() => {\n    const roughCanvas = rough.canvas(canvasRef.current);\n    if (elements.length > 0) {\n      ctx.current.clearRect(\n        0,\n        0,\n        canvasRef.current.width,\n        canvasRef.current.height\n      );\n    }\n    elements.forEach((ele, i) => {\n      if (ele.element === \"rect\") {\n        roughCanvas.draw(\n          generator.rectangle(ele.offsetX, ele.offsetY, ele.width, ele.height, {\n            stroke: ele.stroke,\n            roughness: 0,\n            strokeWidth: 5,\n          })\n        );\n      } else if (ele.element === \"line\") {\n        roughCanvas.draw(\n          generator.line(ele.offsetX, ele.offsetY, ele.width, ele.height, {\n            stroke: ele.stroke,\n            roughness: 0,\n            strokeWidth: 5,\n          })\n        );\n      } else if (ele.element === \"pencil\") {\n        roughCanvas.linearPath(ele.path, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: 5,\n        });\n      }\n    });\n    const canvasImage = canvasRef.current.toDataURL();\n    socket.emit(\"drawing\", canvasImage);\n  }, [elements]);\n\n  const handleMouseMove = (e) => {\n    if (!isDrawing) {\n      return;\n    }\n    const { offsetX, offsetY } = e.nativeEvent;\n\n    if (tool === \"rect\") {\n      setElements((prevElements) =>\n        prevElements.map((ele, index) =>\n          index === elements.length - 1\n            ? {\n                offsetX: ele.offsetX,\n                offsetY: ele.offsetY,\n                width: offsetX - ele.offsetX,\n                height: offsetY - ele.offsetY,\n                stroke: ele.stroke,\n                element: ele.element,\n              }\n            : ele\n        )\n      );\n    } else if (tool === \"line\") {\n      setElements((prevElements) =>\n        prevElements.map((ele, index) =>\n          index === elements.length - 1\n            ? {\n                offsetX: ele.offsetX,\n                offsetY: ele.offsetY,\n                width: offsetX,\n                height: offsetY,\n                stroke: ele.stroke,\n                element: ele.element,\n              }\n            : ele\n        )\n      );\n    } else if (tool === \"pencil\") {\n      setElements((prevElements) =>\n        prevElements.map((ele, index) =>\n          index === elements.length - 1\n            ? {\n                offsetX: ele.offsetX,\n                offsetY: ele.offsetY,\n                path: [...ele.path, [offsetX, offsetY]],\n                stroke: ele.stroke,\n                element: ele.element,\n              }\n            : ele\n        )\n      );\n    }\n  };\n  const handleMouseUp = () => {\n    setIsDrawing(false);\n  };\n\n  return (\n    <div\n      className=\"col-md-8 overflow-hidden border border-dark px-0 mx-auto mt-3\"\n      style={{ height: \"500px\" }}\n      onMouseDown={handleMouseDown}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n    >\n      <canvas ref={canvasRef} />\n    </div>\n  );\n};\n\nexport default Canvas;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}